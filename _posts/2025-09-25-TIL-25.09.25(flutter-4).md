---
title: "Today I Learned 9회차 - [플루터] 전자 액자 만들기"
date: 2025-09-23T00:00:00-00:00
categories:
  - TIL
  - Flutter
tags:
  - TIL
  - Flutter
  - WebView
  - Dart
---

# 전자 액자 만들기

ㅁ 학습 목표

이미지 5개를 롤링해 보여주는 액자 앱을 만듭니다(좌우 스와이프로 이미지를 변경 가능).
그리고 특정 주기마다 반복적으로 함수를 실행하는 방법을 알아보겠습니다.

ㅁ 학습 순서

```
사전 지식 -> 사전 준비 -> 레이아웃 구상하기 -> 구현하기 -> 테스트 하기
```

ㅁ 프로젝트 구상하기

* PageView 위젯
* Timer
* StatefulWidget(생명 주기)

## 사전 지식

### 위젯의 생명주기
위젯의 생명 주기는 위젯이 화면에 그려지는 순간부터 삭제되는 순간까지의 주기를 의미합니다.

**StatelessWidget**

1. StatelessWidget 빌드되면 생성자가 실행
2. build 함수 실행
3. build 함수로 반환된 Widget이 화면에 렌더링

플러터에서 모든 위젯은 Widget 클래스를 상속하고 있고, Widget 클래스는 불변 특성을 가지고 있다.
하지만 위젯의 속성을 변경해야 하는 경우가 있다.

생성자에 새로운 매개변수가 입력되는 경우, build 함수에서 매개 변수 값을 사용한다면 변경된 매개변수를 기반으로 build 함수를 재실행 가능하다.

StatelessWidget 불변이기 때문에 build 함수를 재호출하지 않는다. 대신 인스턴스를 아예 새로 생성한 후 기존 인스턴스를 대체해서 변경 사항을 화면에 반영해야 한다.

**StatefulWidget**

외부에서 위젯 생성자의 매개변수를 변경해주면 위젯이 새롭게 생성되고 build()가 실행되기까지 과정은 StatelessWdiget과 동일하다. 다만 위젯 내부에서 build 함수를 재실행해야 하는 상황이 있다.

아래 3개의 생명 주기는 꼭 이해해야 합니다.

1. 상태 변경이 없는 생명주기
2. StatefulWidget 생성자의 매개변수가 변경됐을 때의 생명주기
3. State 자체적으로 build()를 재실행할 때의 생명주기

**상태 변경이 없는 생명주기**

```startuml
포함 내용
(StatefulWidget)
1. constructor
2. createState()

(State)
3. initState()
4. didChangeDependencies(): State가 의존하는 값이 변경되면 재실행
5. dirty(): State 상태가 dirty로 설정, dirty 상태는 build를 재실행해야하는 상황
6. build(): UI가 반영
7. clean()
  -> didUpdateWidget() -> 5
  -> setState() -> 5
8. deactivate(): 해당 위젯이 위젯 트리에서 사라질 때(일시적 또는 영구적으로 사라질 때 호출)
9. dispose(): 영구적으로 사라질 때 호출
```

**StatefulWidget 생성자의 매개변수가 변경됐을 때 생명주기

```startuml
포함 내용
(StatefulWidget)
1. constructor

(State)
2. didUpdateWidget()
3. dirty(): State 상태가 dirty로 설정, dirty 상태는 build를 재실행해야하는 상황
4. build(): UI가 반영
5. clean()
```

**State 자체적으로 build()를 재실행할 때 생명주기

setState() 함수를 실행해서 build() 함수를 자체적으로 재실행할 수 있습니다.

```startuml
포함 내용

(State)
1. setState()
2. dirty(): State 상태가 dirty로 설정, dirty 상태는 build를 재실행해야하는 상황
3. build(): UI가 반영
4. clean()
```

### Timer

Timer는 특정 시간이 지난 후에 일회성 또는 지속적으로 함수를 실행한다.

```dart
Timer( // 한번 실행
  Duration(seconds: 3), // 주기
  (Timer timer) {}, // 콜백 함수
) 
Timer.periodic( // 주기적으로 실행
  Duration(seconds: 3), // 주기
  (Timer timer) {}, // 콜백 함수
)
```

## 구현하기

### PageView 구현하기

PageView는 여러 개의 위젯을 단독 페이지로 생성하고 가로 또는 세로 스와이프로 페이지를 넘길 수 있게 하는 위젯이다.

| BoxFit 속성 | 설명 |
| --- | --- |
| BoxFit.contain | | 
| BoxFit.cover | |
| BoxFit.fill | |
| BoxFit.fitHeight | |
| BoxFit.fitWidth | |
| BoxFit.none | |
| BoxFit.scaleDown | |

### 상태바 색상 변경하기

상태바는 앱을 실행 중 핸드폰 배터리, 시간, 와이파이 연결 상태 등을 보여주는 영역이다.

```dart
SystemChrome.setSystemUIOverlayStyle(SystemUiOverlayStyle.light); 
```

`SystemChrome` 클래스는 시스템 UI의 그래픽 설정을 변경하는 기능을 제공합니다.

**SystemChrome 함수**

| 함수 | 설명 |
| --- | --- |
| setEnabledSystemUIMode() | |
| setPreferredOrientations() |  |
| setSystemUIChangeCallback() | |
| setSytemUIOverlayStyle() | |

### 타이머 추가하기

Timer를 추가하려면 HomeScreen을 StatefulWidget으로 변경해야 합니다.
StatelessWidget을 그대로 사용하면 Timer를 등록할 수 있는 위치가 build 함수 밖에 없습니다. build()에 Timer를 등록하면 안타깝게도 위젯이 새로 생성될 때마다 새로운 Timer가 생성된다.

하지만 StatefulWidget을 사용하면 initState에서 Timer를 생성할 수 있어 딱 1번 생성이 가능하다.

pageController.page 게터를 사용해서 PageView의 현재 페이지를 가져올 수 있습니다.
**페이지가 변경 중인 경우 소수점으로 표현돼서 double로 값이 반환됩니다**