---
title: "Today I Learned 4íšŒì°¨ - Firebase ì—°ë™"
date: 2025-09-18T00:00:00-00:00
categories:
  - TIL
tags:
  - TIL
  - Flutter
  - Widget
  - Dart
---

# Firebase ì—°ë™ 

## 4-1 Firebase Firestoreë€?

### Firebase
* Googleì—ì„œ ì œê³µí•˜ëŠ” ëª¨ë°”ì¼ ë° ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ í”Œë«í¼
* ì„œë²„ë¥¼ ì§ì ‘ êµ¬ì¶•í•˜ì§€ ì•Šì•„ë„ ë¡œê·¸ì¸, ë°ì´í„° ì €ì¥, ì•ŒëŒ ë“±ì„ ì†ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” í´ë¼ìš°ë“œ ë°±ì—”ë“œ ì„œë¹„ìŠ¤

### Firestore

* í´ë¼ìš°ë“œ ê¸°ë°˜ NoSQL ë°ì´í„° ë² ì´ìŠ¤
* ì•±ì—ì„œ ìƒì„±ë˜ëŠ” ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì €ì¥í•˜ê³  ë™ê¸°í™”í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ

**ê¸°ì¡´ ë°ì´í„°ë² ì´ìŠ¤ ë°©ì‹**

ì—´(column)ì´ ì •í•´ì ¸ ìˆì–´ì„œ ìƒˆë¡œ ì¶”ê°€í•˜ê±°ë‚˜ ëˆ„ë½ëœ ê°’ì´ ìˆìœ¼ë©´ ì˜¤ë¥˜ê°€ ë‚  ìˆ˜ ìˆì–´ìš”.

**NoSQL ë°©ì‹ (Firestore ë¬¸ì„œ êµ¬ì¡°)**

ë¬¸ì„œë§ˆë‹¤ ë‹¤ë¥¸ ì†ì„±ì„ ììœ ë¡­ê²Œ ì €ì¥í•  ìˆ˜ ìˆì–´ì„œ, ìƒí™©ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ ë°ì´í„° êµ¬ì¡° êµ¬ì„± ê°€ëŠ¥!

ë¬¸ì„œ: 1
```
{
	"í• ì¼": "í”ŒëŸ¬í„°ê³µë¶€",
	"ì™„ë£Œì—¬ë¶€": "false"
}
```

ë¬¸ì„œ: 2
```
{
	"í• ì¼": "ìš´ë™í•˜ê¸°",
	"ì™„ë£Œì—¬ë¶€": "false",
	"ì‚­ì œì¼ì": "2025-07-05",
	"ì‚­ì œì´ìœ ": "ì´ë¯¸ ê±´ê°•í•¨"
}
```

## 4-4. íˆ¬ë‘ì•± Firebase ì„¸íŒ…í•˜ê¸°

0. Firebaseì—ì„œ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ìƒì„±
1. flutterfire configure
2. android, iosë§Œ ì„ íƒ í›„ ì—”í„°
3. flutter pub add firebase_core cloud_firestore


## 4-5. Firestore ì‚¬ìš©ë²• ì •ë¦¬

ë©”ëª¨ì•±ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•œë‹¤ê³  í–ˆì„ ë•Œ

* í• ì¼ ë‹¨ìœ„ë¡œ 1ê°œì˜ íŒŒì¼ì„ ìƒì„±í•˜ê³ 
* ê·¸ íŒŒì¼ë“¤ì„ 1ê°œì˜ í´ë”ì— ëª¨ì•„ì„œ ì •ë¦¬
* ì¦‰, í• ì¼ ëª©ë¡ ì „ì²´ = í´ë”, ê° í•  ì¼ = íŒŒì¼
  * ê° íŒŒì¼ë§ˆë‹¤ ê³ ìœ í•œ ì´ë¦„(ID)ë¥¼ ë§Œë“¤ì–´ì•¼ í•¨

* Firestoreì˜ êµ¬ì¡°ë¥¼ ì»´í“¨í„° ì•ˆì˜ í´ë”ì™€ íŒŒì¼ì²˜ëŸ¼ ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° ì‰¬ì›Œìš”
  * í•˜ë‚˜ì˜ ì»¬ë™ì…˜(Collection) = í•˜ë‚˜ì˜ í´ë”

### Read

```dart
void loadTodos() async {
  // ì»´í“¨í„° ì¼œê¸° â†’ í´ë” ì—´ê¸° â†’ ì „ì²´ ì„ íƒ í›„ ì‹¤í–‰
  // íŒŒì´ì–´ìŠ¤í† ì–´ ì¸ìŠ¤í„´ìŠ¤ ê°€ì§€ê³ ì˜¤ê¸° -> ì»¬ë ‰ì…˜ ì°¸ì¡° ë§Œë“¤ê¸° -> ê°€ì ¸ì˜¤ê¸°
  final firestore = FirebaseFirestore.instance;
  final colRef = firestore.collection('todos');
  final querySnapshot = await colRef.get();
  final documents = querySnapshot.docs;
  List<Todo> newTodoList = [];
  for (var i = 0; i < documents.length; i++) {
    final data = documents[i].data();
    newTodoList.add(Todo(title: data['title'], isDone: data['isDone']));
  }

  setState(() {
    todoList = newTodoList;
  });
}
```

### Create

```dart
void loadTodos() async {
  // ì»´í“¨í„° ì¼œê¸° â†’ í´ë” ì—´ê¸° â†’ ì „ì²´ ì„ íƒ í›„ ì‹¤í–‰
  // íŒŒì´ì–´ìŠ¤í† ì–´ ì¸ìŠ¤í„´ìŠ¤ ê°€ì§€ê³ ì˜¤ê¸° -> ì»¬ë ‰ì…˜ ì°¸ì¡° ë§Œë“¤ê¸° -> ê°€ì ¸ì˜¤ê¸°
  final firestore = FirebaseFirestore.instance;
  final colRef = firestore.collection('todos');
  // orderBy : CollectionReference í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ
  // createdAt í•„ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ëœ ì¿¼ë¦¬ë¥¼ ìƒì„±í•¨
  // íƒ€ì…: Query<Map<String, dynamic>>
  // â†’ ë°ì´í„°ë¥¼ ì •ë ¬/í•„í„°ë§í•  ìˆ˜ ìˆëŠ” Firestore ì¿¼ë¦¬ ê°ì²´
  final query = colRef.orderBy('createdAt', descending: true);
  final querySnapshot = await query.get();
  final documents = querySnapshot.docs;
  List<Todo> newTodoList = [];
  for (var i = 0; i < documents.length; i++) {
    final data = documents[i].data();
    newTodoList.add(Todo(title: data['title'], isDone: data['isDone']));
  }

  setState(() {
    todoList = newTodoList;
  });
}
```

**.toIso8601String()ì´ë€?**

- DateTime ê°ì²´ë¥¼ ë¬¸ìì—´(String) ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì„œë“œ
- êµ­ì œ í‘œì¤€ í˜•ì‹(ISO 8601)ì— ë§ì¶° ë³€í™˜
- `2025-08-01T22:15:32.123456` TëŠ” ë‚ ì§œì™€ ì‹œê°„ì„ êµ¬ë¶„í•´ì£¼ëŠ” êµ¬ë¶„ì!

### Delete

```dart
onLongPress: () async {
  final result = await showCupertinoDialog(
    ... ìƒëµ
  if (result) {
    // ì»´í“¨í„° ì¼œê¸° â†’ í´ë” ì—´ê¸° â†’ í•˜ë‚˜ì˜ íŒŒì¼ ì„ íƒ â†’ ì‚­ì œ
    // Firestore ì¸ìŠ¤í„´ìŠ¤ ê°€ì§€ê³ ì˜¤ê¸° â†’ ì»¬ë ‰ì…˜ ì°¸ì¡° ë§Œë“¤ê¸° â†’ íŠ¹ì •IDì˜ ë¬¸ì„œ ì°¸ì¡° ë§Œë“¤ê¸° â†’ ì‚­ì œ
    final firestore = FirebaseFirestore.instance;
    final colRef = firestore.collection('todos');
    final docRef = colRef.doc(item.id);
    await docRef.delete();
    loadTodos();
  }
},
```


### Update
``` dart
onTap: () async {
  // ì»´í“¨í„° ì¼œê¸° â†’ í´ë” ì—´ê¸° â†’ í•˜ë‚˜ì˜ íŒŒì¼ ì„ íƒ â†’ ë‚´ìš© ìˆ˜ì • í›„ ì €ì¥
  // Firestore ì¸ìŠ¤í„´ìŠ¤ ê°€ì§€ê³ ì˜¤ê¸° â†’ ì»¬ë ‰ì…˜ ì°¸ì¡° ë§Œë“¤ê¸° â†’ íŠ¹ì •IDì˜ ë¬¸ì„œ ì°¸ì¡° ë§Œë“¤ê¸° â†’ ìˆ˜ì •
  final firestore = FirebaseFirestore.instance;
  final colRef = firestore.collection('todos');
  final docRef = colRef.doc(item.id);
  await docRef.update({'isDone': !item.isDone});
  loadTodos();
},
```

# êµ¬ê¸€ ë¡œê·¸ì¸ ì—°ë™

## 5-1. ì•”í˜¸í™” ë° êµ¬ê¸€ ë¡œê·¸ì¸
**ëŒ€ì¹­í‚¤ ì•”í˜¸í™”**

- í•˜ë‚˜ì˜ **ê³µí†µ í‚¤**ë¡œ ì•”í˜¸í™”ì™€ ë³µí˜¸í™”ë¥¼ ëª¨ë‘ ìˆ˜í–‰
- ë¹ ë¥´ì§€ë§Œ, **í‚¤ê°€ ìœ ì¶œë˜ë©´ ëª¨ë“  ì •ë³´ê°€ í„¸ë¦´ ìˆ˜ ìˆìŒ**

<img src="../../assets/images/TIL/2025-09-18-(1).png" width="400">

**ë¹„ëŒ€ì¹­í‚¤ ì•”í˜¸í™”**

- ğŸ”“ ê³µê°œí‚¤(Public Key)ë¡œ ì•”í˜¸í™”
- ğŸ”’ ê°œì¸í‚¤(Private Key)ë¡œë§Œ ë³µí˜¸í™” ê°€ëŠ¥
- í‚¤ê°€ **ìŒìœ¼ë¡œ ì¡´ì¬**í•˜ë¯€ë¡œ, ë³´ì•ˆì„±ì´ ë” ë†’ìŒ

<img src="../../assets/images/TIL/2025-09-18-(2).png" width="400">


**ë¹„ëŒ€ì¹­í‚¤ë¥¼ í™œìš©í•œ ì „ìì„œëª…**

<img src="../../assets/images/TIL/2025-09-18-(3).png" width="400">

### êµ¬ê¸€ ë¡œê·¸ì¸ì—ì„œ ë¹„ëŒ€ì¹­ ì•”í˜¸í™” í™œìš©

<img src="../../assets/images/TIL/2025-09-18-(4).png" width="400">