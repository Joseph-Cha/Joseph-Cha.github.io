---
title: "ğŸ“š Today I Learned 23íšŒì°¨ - MVVM & Riverpod ìƒíƒœ ê´€ë¦¬ ğŸ’¡"
date: 2025-11-3T00:00:00-00:00
categories:
  - TIL
  - Flutter
tags:
  - TIL
  - Flutter
  - Dart
  - MVVM
  - Riverpod
  - ìƒíƒœê´€ë¦¬
---

ì˜¤ëŠ˜ì€ Flutter ì•± ê°œë°œì—ì„œ í•µì‹¬ì ì¸ **MVVM ì•„í‚¤í…ì²˜**ì™€ **Riverpod**ì„ í™œìš©í•œ ìƒíƒœ ê´€ë¦¬ì— ëŒ€í•´ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. MVVM íŒ¨í„´ì´ ì™œ í•„ìš”í•œì§€, ê·¸ë¦¬ê³  Riverpodì´ ì–´ë–»ê²Œ ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ êµ¬í˜„í•˜ë„ë¡ ë„ì™€ì£¼ëŠ”ì§€ ì‹¤ìŠµì„ í†µí•´ ìµí˜”ì–´ìš”! ğŸš€

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- **MVVM ì•„í‚¤í…ì²˜**ì˜ ê°œë…ê³¼ ê° ê³„ì¸µì˜ ì—­í•  ì´í•´í•˜ê¸°
- **Riverpod** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œ ìƒíƒœ ê´€ë¦¬ ë°©ë²• ìµíˆê¸°
- `Notifier`ì™€ `NotifierProvider`ë¥¼ í™œìš©í•œ ViewModel êµ¬í˜„í•˜ê¸°
- `Consumer` ìœ„ì ¯ì„ í†µí•œ ìƒíƒœ êµ¬ë… ë° UI ì—…ë°ì´íŠ¸ êµ¬í˜„í•˜ê¸°

## ğŸ“š ì£¼ìš” ë‚´ìš©

### â­ MVVM ì•„í‚¤í…ì²˜

**MVVM**ì€ **Model + View + ViewModel**ì˜ ì•½ìë¡œ, ì•±ì˜ êµ¬ì¡°ë¥¼ ì„¸ ê°€ì§€ ê³„ì¸µìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ì…ë‹ˆë‹¤.

#### ğŸ“Š MVVM ë™ì‘ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     View (UI)                       â”‚
â”‚                    â””â”€â”€ Widget                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                     â”‚
          â‘  ì‚¬ìš©ì ì•¡ì…˜          â‘¦ ìƒíƒœ ë³€ê²½ ê°ì§€
          (ë²„íŠ¼ í´ë¦­ ë“±)           (í™”ë©´ ì—…ë°ì´íŠ¸)
               â”‚                     â”‚
               â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ViewModel                              â”‚
â”‚              â””â”€â”€ ìƒíƒœ ê´€ë¦¬ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§               â”‚
â”‚               (Viewë¥¼ ì•Œì§€ ëª»í•¨)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                     â”‚
          â‘¢ ë¡œì§ ì²˜ë¦¬           â‘¤ ë°ì´í„° ê°€ê³µ
          â‘£ ë°ì´í„° ìš”ì²­         â‘¥ ìƒíƒœ ì—…ë°ì´íŠ¸
               â”‚                     â”‚
               â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Model (Data)                       â”‚
â”‚                  â””â”€â”€ Repository, API                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ’¡ MVVMì˜ ì¥ì 

| **ì¥ì ** | **ì„¤ëª…** |
|:---:|:---|
| **ì½”ë“œ ë¶„ë¦¬** | ê° ê³„ì¸µì˜ ì—­í• ì— ë§ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ì½”ë“œê°€ ê¹”ë”í•´ì§ |
| **í…ŒìŠ¤íŠ¸ ìš©ì´** | ê° ê³„ì¸µë³„ë¡œ ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ê°€ëŠ¥ |
| **ë‚®ì€ ê²°í•©ë„** | ViewëŠ” ViewModelì„ ì°¸ì¡°í•˜ì§€ë§Œ, ViewModelì€ ì–´ë–¤ Viewê°€ ì°¸ì¡°í•˜ëŠ”ì§€ ëª¨ë¦„ |
| **ìœ ì§€ë³´ìˆ˜ì„±** | ë¡œì§ê³¼ UIê°€ ë¶„ë¦¬ë˜ì–´ ìˆ˜ì •ì´ ìš©ì´í•¨ |

> ğŸ’¡ **í•µì‹¬**: Flutterì—ì„œëŠ” **ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**(Riverpod, Provider ë“±)ë¥¼ í†µí•´ MVVMì„ íš¨ê³¼ì ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

### âš¡ Riverpod ìƒíƒœ ê´€ë¦¬

**Riverpod**ì€ Flutterì—ì„œ ìƒíƒœ ê´€ë¦¬ë¥¼ í¸í•˜ê²Œ í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

#### ğŸ” Riverpodì˜ ì£¼ìš” íŠ¹ì§•

- **ê°œë°œì ì¹œí™”ì **: ìƒíƒœ ê´€ë¦¬ë¥¼ ê°„ë‹¨í•˜ê³  ì§ê´€ì ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥
- **ViewModel ì—­í•  ì§€ì›**: ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ë³€ê²½ì„ ì•Œë¦¬ëŠ” ì—­í• ì„ ì‰½ê²Œ êµ¬í˜„
- **Viewì™€ ViewModel ì—°ê²°**: `Consumer` ìœ„ì ¯ì„ í†µí•´ ì‰½ê²Œ ìƒíƒœë¥¼ ê´€ì°°í•˜ê³  UI ì—…ë°ì´íŠ¸

#### ğŸ› ï¸ Riverpod í•µì‹¬ êµ¬ì„± ìš”ì†Œ

| **êµ¬ì„± ìš”ì†Œ** | **ì—­í• ** | **ì£¼ìš” ë©”ì„œë“œ/íŠ¹ì§•** |
|:---:|:---|:---|
| **Notifier** | ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ì—…ë°ì´íŠ¸í•˜ëŠ” í´ë˜ìŠ¤ | `build()`: ìµœì´ˆ ìƒíƒœ ë°˜í™˜<br>`state`: ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹œ ìƒˆ ê°ì²´ ìƒì„± |
| **NotifierProvider** | ViewModelì„ ìœ„ì ¯ì— ê³µê¸‰í•˜ëŠ” ê°ì²´ | ViewModelì„ ì „ì—­ì ìœ¼ë¡œ ì œê³µ |
| **Consumer** | ViewModelì˜ ìƒíƒœë¥¼ êµ¬ë…í•˜ëŠ” ìœ„ì ¯ | ìƒíƒœ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ UI ë¦¬ë¹Œë“œ |
| **ProviderScope** | ëª¨ë“  Providerë¥¼ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ìµœìƒìœ„ ìœ„ì ¯ | `main()` í•¨ìˆ˜ì—ì„œ ì•± ì „ì²´ë¥¼ ê°ìŒˆ |

## ğŸ’» ì‹¤ìŠµ ë° ì˜ˆì œ

### ğŸ“¦ 1. Riverpod íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# pubspec.yamlì— íŒ¨í‚¤ì§€ ì¶”ê°€
flutter pub add flutter_riverpod
```

### ğŸ—ï¸ 2. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lib/
â”œâ”€â”€ main.dart                  # ì•± ì§„ì…ì 
â”œâ”€â”€ models/
â”‚   â””â”€â”€ user.dart              # ë°ì´í„° ëª¨ë¸
â”œâ”€â”€ repositories/
â”‚   â””â”€â”€ user_repository.dart   # ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
â”œâ”€â”€ viewmodels/
â”‚   â””â”€â”€ user_viewmodel.dart    # ìƒíƒœ ê´€ë¦¬ ë¡œì§
â””â”€â”€ views/
    â””â”€â”€ user_list_screen.dart  # UI ìœ„ì ¯
```

### ğŸ”§ 3. êµ¬í˜„ ì˜ˆì œ

#### Model í´ë˜ìŠ¤ ë§Œë“¤ê¸°

```dart
// models/user.dart
class User {
  final int id;
  final String name;
  final String email;

  // ìƒì„±ì
  User({
    required this.id,
    required this.name,
    required this.email,
  });

  // ìƒíƒœë¥¼ ë¶ˆë³€ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ copyWith ë©”ì„œë“œ
  User copyWith({
    int? id,
    String? name,
    String? email,
  }) {
    return User(
      id: id ?? this.id,
      name: name ?? this.name,
      email: email ?? this.email,
    );
  }
}
```

#### Repository í´ë˜ìŠ¤ ë§Œë“¤ê¸°

```dart
// repositories/user_repository.dart
class UserRepository {
  // APIë‚˜ ë¡œì»¬ DBì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
  Future<List<User>> fetchUsers() async {
    // ì‹¤ì œë¡œëŠ” HTTP ìš”ì²­ì´ë‚˜ DB ì¿¼ë¦¬
    await Future.delayed(Duration(seconds: 1)); // ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì‹œë®¬ë ˆì´ì…˜

    return [
      User(id: 1, name: 'ê¹€ì² ìˆ˜', email: 'kim@example.com'),
      User(id: 2, name: 'ì´ì˜í¬', email: 'lee@example.com'),
      User(id: 3, name: 'ë°•ë¯¼ìˆ˜', email: 'park@example.com'),
    ];
  }
}
```

#### ViewModel ë§Œë“¤ê¸° (Notifier ìƒì†)

```dart
// viewmodels/user_viewmodel.dart
import 'package:flutter_riverpod/flutter_riverpod.dart';

// ìƒíƒœ í´ë˜ìŠ¤ ì •ì˜
class UserListState {
  final List<User> users;
  final bool isLoading;

  UserListState({
    required this.users,
    required this.isLoading,
  });

  // ì´ˆê¸° ìƒíƒœ
  factory UserListState.initial() {
    return UserListState(
      users: [],
      isLoading: false,
    );
  }

  // ìƒíƒœ ë³µì‚¬ ë©”ì„œë“œ
  UserListState copyWith({
    List<User>? users,
    bool? isLoading,
  }) {
    return UserListState(
      users: users ?? this.users,
      isLoading: isLoading ?? this.isLoading,
    );
  }
}

// ViewModel í´ë˜ìŠ¤ (Notifier ìƒì†)
class UserViewModel extends Notifier<UserListState> {
  final UserRepository _repository = UserRepository();

  // build(): ìµœì´ˆ ìƒíƒœ ë°˜í™˜
  @override
  UserListState build() {
    return UserListState.initial();
  }

  // ì‚¬ìš©ì ëª©ë¡ ë¡œë“œ ë©”ì„œë“œ
  Future<void> loadUsers() async {
    // ë¡œë”© ìƒíƒœë¡œ ë³€ê²½ (ìƒˆë¡œìš´ ê°ì²´ ìƒì„±)
    state = state.copyWith(isLoading: true);

    try {
      // Repositoryì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      final users = await _repository.fetchUsers();

      // ìƒíƒœ ì—…ë°ì´íŠ¸ (ìƒˆë¡œìš´ ê°ì²´ ìƒì„±)
      state = state.copyWith(
        users: users,
        isLoading: false,
      );
    } catch (e) {
      // ì—ëŸ¬ ì²˜ë¦¬
      state = state.copyWith(isLoading: false);
    }
  }

  // ì‚¬ìš©ì ì¶”ê°€ ë©”ì„œë“œ
  void addUser(User user) {
    state = state.copyWith(
      users: [...state.users, user],
    );
  }
}

// NotifierProvider ê°ì²´ ìƒì„± (ì „ì—­ ë³€ìˆ˜)
final userViewModelProvider = NotifierProvider<UserViewModel, UserListState>(() {
  return UserViewModel();
});
```

#### Viewì—ì„œ ì‚¬ìš©í•˜ê¸° (Consumer ìœ„ì ¯)

```dart
// main.dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

void main() {
  // ProviderScopeë¡œ ì•± ì „ì²´ë¥¼ ê°ì‹¸ê¸° (í•„ìˆ˜!)
  runApp(
    ProviderScope(
      child: MyApp(),
    ),
  );
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: UserListScreen(),
    );
  }
}

// views/user_list_screen.dart
class UserListScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // ViewModelì˜ ìƒíƒœë¥¼ êµ¬ë… (watch)
    final userState = ref.watch(userViewModelProvider);

    // ViewModelì˜ ë©”ì„œë“œì— ì ‘ê·¼ (read)
    final viewModel = ref.read(userViewModelProvider.notifier);

    return Scaffold(
      appBar: AppBar(
        title: Text('ì‚¬ìš©ì ëª©ë¡'),
      ),
      body: userState.isLoading
          ? Center(child: CircularProgressIndicator())
          : ListView.builder(
              itemCount: userState.users.length,
              itemBuilder: (context, index) {
                final user = userState.users[index];
                return ListTile(
                  leading: CircleAvatar(child: Text('${user.id}')),
                  title: Text(user.name),
                  subtitle: Text(user.email),
                );
              },
            ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          // ViewModelì˜ ë©”ì„œë“œ í˜¸ì¶œ
          viewModel.loadUsers();
        },
        child: Icon(Icons.refresh),
      ),
    );
  }
}
```

### ğŸ¯ Riverpod ì‚¬ìš© ì‹œ í•µì‹¬ í¬ì¸íŠ¸

> ğŸ’¡ **ìƒíƒœ ì—…ë°ì´íŠ¸ ì›ì¹™**: ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ë•ŒëŠ” í•­ìƒ **ìƒˆë¡œìš´ ê°ì²´**ë¥¼ ë§Œë“¤ì–´ì„œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤!

```dart
// âŒ ì˜ëª»ëœ ë°©ë²• - ì§ì ‘ ìˆ˜ì •í•˜ë©´ UIê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ
state.users.add(newUser);

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²• - ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
state = state.copyWith(
  users: [...state.users, newUser],
);
```

### ğŸš€ Riverpod ì‚¬ìš©ì˜ ì¥ì  ì •ë¦¬

| **ì¥ì ** | **ì„¤ëª…** |
|:---:|:---|
| **ì „ì—­ ìƒíƒœ ê´€ë¦¬** | `Provider`ê°€ ViewModelì„ ì „ì—­ì ìœ¼ë¡œ ê³µê¸‰í•˜ì—¬ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥ |
| **ë¶ˆí•„ìš”í•œ íŒŒë¼ë¯¸í„° ì „ë‹¬ ì œê±°** | í•˜ìœ„ ìœ„ì ¯ì— propsë¡œ ê³„ì† ì „ë‹¬í•  í•„ìš” ì—†ìŒ |
| **ì½”ë“œ ë¶„ë¦¬** | ìœ„ì ¯ì€ UIë§Œ, ViewModelì€ ìƒíƒœ ê´€ë¦¬ë§Œ ë‹´ë‹¹í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ ìš©ì´ |
| **íƒ€ì… ì•ˆì •ì„±** | ì»´íŒŒì¼ íƒ€ì„ì— ì˜¤ë¥˜ ê°ì§€ ê°€ëŠ¥ |

## ğŸ“ ë§ˆë¬´ë¦¬

### âœ… ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ

- **MVVM ì•„í‚¤í…ì²˜**: Model, View, ViewModelì˜ ì—­í•  ë¶„ë¦¬ë¥¼ í†µí•´ ê¹”ë”í•œ ì½”ë“œ êµ¬ì¡° êµ¬í˜„
- **Riverpodì˜ í•µì‹¬ ê°œë…**: `Notifier`, `NotifierProvider`, `Consumer` ìœ„ì ¯ì˜ ì—­í• ê³¼ ì‚¬ìš©ë²•
- **ìƒíƒœ ê´€ë¦¬ íŒ¨í„´**: ë¶ˆë³€ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ `copyWith` ë©”ì„œë“œ í™œìš©
- **ì‹¤ìŠµ êµ¬í˜„**: ì‚¬ìš©ì ëª©ë¡ì„ ê´€ë¦¬í•˜ëŠ” ì™„ì „í•œ MVVM + Riverpod ì˜ˆì œ ì‘ì„±